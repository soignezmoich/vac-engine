<tr class={if @mismatch do "bg-red-200" else "bg-purple-100" end}>
  <%= case {@expected, @forbidden} do %>
    <% {expected, forbidden} when not is_nil(expected) or forbidden -> %>
      <td class="pr-3 text-purple-700">
        <span class="text-xs hover:text-purple-400"><.icon name="toggle-on" width="2rem"/></span>
      </td>
      <td>
        <%= @variable.path |> Enum.drop(-1) |> Enum.map(fn _ -> "\u2574" end) %><%= @variable.name %>
      </td>
      <%= if @forbidden do %>
        <td class={"pl-2 text-red-500"}>
          <span class="text-xs hover:text-red-300"><.icon name="hero/ban" width="1.6rem"/></span>
        </td>
        <td/>
      <% else %>
        <td class={"pl-2 text-gray-300"}>
          <span class="text-xs hover:text-red-300"><.icon name="hero/ban" width="1.6rem"/></span>
        </td>
        <td class="pl-2">
          <%= case @variable.type do %>
          <% :boolean -> %>
            <.boolean_input value={@expected} />
          <% :number -> %>
            <.number_input value={@expected} />
          <% :integer -> %>
            <.integer_input value={@expected} />
          <% :string -> %>
            <.string_input enum={@variable.enum} value={@expected} />
          <% :date -> %>
            <.date_input value={@expected} />
          <% :datetime -> %>
            <.datetime_input value={@expected} />
          <% :map -> %>
            <div class="inline-block form-fld invisible">
              placeholder
            </div>
          <% end %>
        </td>
      <% end %>
      <td class="w-full">
        <%= if is_nil(@actual) do %>
          -
        <% else %>
          <%= if @variable.type == :map do %>
            <.icon name="hero/sort-descending" width="1.25rem" />
          <% else %>
            <%= inspect(@actual) %>
          <% end %>
        <% end %>
      </td>
    <% _ -> %>
      <td class="pr-3 text-purple-700">
        <span class="text-xs hover:text-purple-400"><.icon name="toggle-off" width="2rem"/></span>
      </td>
      <td>
        <%= @variable.path |> Enum.drop(-1) |> Enum.map(fn _ -> "\u2574" end) %><%= @variable.name %>
      </td>
      <td/>
      <td>
        <div class="inline-block form-fld invisible">
          placeholder
        </div>
      </td>
      <td class="w-full">
        <%= if is_nil(@actual) do %>
          -
        <% else %>
          <%= if @variable.type == :map do %>
            <.icon name="hero/sort-descending" width="1.25rem" />
          <% else %>
            <%= inspect(@actual) %>
          <% end %>
        <% end %>
      </td>
  <% end %>
</tr>
